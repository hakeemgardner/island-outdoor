<!-- @format -->

<!doctype html>
<html class="light" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Join the Adventure - JamGear Outdoor</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Noto+Sans:wght@400;500&display=swap"
      rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@100..700&display=swap"
      rel="stylesheet" />
    <link rel="stylesheet" href="signup.css" />
  </head>
  <body>
    <!-- Top Navigation -->
    <header class="site-header">
      <div class="logo-section">
        <div class="logo-icon">
          <span class="material-symbols-outlined">landscape</span>
        </div>
        <h2 class="brand-name">JamGear Outdoor</h2>
      </div>
      <div class="nav-section">
        <nav class="main-nav">
         <a class="nav-link" href="/index.html">Home</a>
          <a class="nav-link" href="/signin.html">signin</a>
        </nav>
      </div>
    </header>

    <!-- Main Registration Container -->
    <main class="main-content">
      <!-- Abstract Background Decoration -->
      <div class="bg-decoration bg-decoration-top"></div>
      <div class="bg-decoration bg-decoration-bottom"></div>

      <div class="registration-container">
        <!-- Hero Decor -->
        <div class="card-accent"></div>

        <div class="card-content">
          <!-- Headline -->
          <div class="card-header">
            <h1 class="card-title">Join the Adventure</h1>
            <p class="card-subtitle">
              Get gear designed for the island lifestyle.
            </p>
          </div>

          <!-- Registration Form -->
          <form class="registration-form" method="POST">
            <!-- Full Name Field -->
            <div class="form-group">
              <label class="form-label">Full Name</label>
              <div class="input-wrapper">
                <span class="material-symbols-outlined input-icon">person</span>
                <input
                  id="fullName"
                  class="form-input"
                  placeholder="Enter your full name"
                  required
                  type="text" />
              </div>
            </div>

            <!-- Email Field -->
            <div class="form-group">
              <label class="form-label">Email Address</label>
              <div class="input-wrapper">
                <span class="material-symbols-outlined input-icon">mail</span>
                <input
                  id="email"
                  class="form-input"
                  placeholder="name@example.com"
                  required
                  type="email" />
              </div>
            </div>

            <!-- Password Field -->
            <div class="form-group">
              <label class="form-label">Password</label>
              <div class="input-wrapper">
                <span class="material-symbols-outlined input-icon">lock</span>
                <input
                  id="password"
                  class="form-input"
                  placeholder="Create a strong password"
                  required
                  type="password" />
              </div>
            </div>

            <!-- Terms Checkbox -->
            <div class="checkbox-group">
              <div class="checkbox-wrapper">
                <input class="form-checkbox" id="terms" type="checkbox" />
              </div>
              <label class="checkbox-label" for="terms">
                I agree to the <a href="#">Terms of Service</a> and
                <a href="#">Privacy Policy</a>.
              </label>
            </div>

            <!-- Submit Button -->
            <button class="btn-submit" type="submit">
              <span>Create Account</span>
            </button>
          </form>

          <!-- Switch to Login -->
          <div class="switch-auth">
            <p class="switch-text">
              Already have an account?
              <a class="switch-link" href="#">Log In</a>
            </p>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer Decoration -->
    <footer class="site-footer">
      <div class="footer-icons">
        <span class="material-symbols-outlined">hiking</span>
        <span class="material-symbols-outlined">kayaking</span>
        <span class="material-symbols-outlined">camping</span>
        <span class="material-symbols-outlined">surfing</span>
      </div>
      <p class="footer-text">Â© 2024 JamGear Outdoor - Built for the Island</p>
    </footer>

    <!-- Firebase Signup Script -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import {
        getAuth,
        createUserWithEmailAndPassword,
        updateProfile,
      } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
      import {
        getFirestore,
        doc,
        setDoc,
      } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyAwm42JZyLpUFx4zfBmKJg3JZXktHI6fVQ",
        authDomain: "shop-22e92.firebaseapp.com",
        projectId: "shop-22e92",
        storageBucket: "shop-22e92.appspot.com",
        messagingSenderId: "889317583509",
        appId: "1:889317583509:web:d031502fca199e8a18c99c",
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);

      document
        .querySelector(".registration-form")
        .addEventListener("submit", async (e) => {
          e.preventDefault();

          const fullName = document.getElementById("fullName").value.trim();
          const email = document.getElementById("email").value.trim();
          const password = document.getElementById("password").value;
          const terms = document.getElementById("terms").checked;

          if (!terms) {
            alert("You must agree to the terms.");
            return;
          }

          try {
            const userCredential = await createUserWithEmailAndPassword(
              auth,
              email,
              password,
            );
            await updateProfile(userCredential.user, { displayName: fullName });

            await setDoc(doc(db, "users", userCredential.user.uid), {
              fullName,
              email,
              createdAt: new Date(),
            });

            alert("Account created successfully!");
            // window.location.href = "signin.html"; // optional redirect
          } catch (error) {
            alert(error.message);
          }
        });
    </script>
  </body>
</html>
